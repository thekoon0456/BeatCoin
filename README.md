# BeatCoin
ë‚˜ë§Œì˜ ì‹¤ì‹œê°„ ì½”ì¸ ê´€ë¦¬ ë§¤ë‹ˆì € BeatCoin!<br>
ì‹¤ì‹œê°„ ì¸ê¸° ì½”ì¸ì„ ì¡°íšŒí•˜ê³ , ë‚˜ë§Œì˜ ì½”ì¸ìœ¼ë¡œ ì¦ê²¨ì°¾ê¸°í•˜ì„¸ìš”.<br>
ê·¸ë˜í”„ë¡œ í•œëˆˆì— ì•Œ ìˆ˜ ìˆëŠ” ì½”ì¸ ë™í–¥ê¹Œì§€<br>
<br>

## ğŸ“±ìŠ¤í¬ë¦°ìƒ·
<img src="https://github.com/thekoon0456/BeatCoin/assets/106993057/91e28e85-62e3-4cb5-9f86-1072a512b940" width="150" style="padding-left: 40px;"></img>
<img src="https://github.com/thekoon0456/BeatCoin/assets/106993057/25553be9-29df-4159-8f5d-5af1431ad54c" width="150" style="padding-left: 40px;"></img>
<img src="https://github.com/thekoon0456/BeatCoin/assets/106993057/1ede37ea-543a-46f7-b532-7e7237993f6e" width="150" style="padding-left: 40px;"></img>
<img src="https://github.com/thekoon0456/BeatCoin/assets/106993057/8b5202fd-c17a-4c33-9080-5cb89145416d" width="150" style="padding-left: 40px;"></img>
<img src="https://github.com/thekoon0456/BeatCoin/assets/106993057/d14e214e-80de-44e6-86e5-bffc5f0cbd38" width="150" style="padding-left: 40px;"></img>
<br>

## ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥
- í˜„ì¬ ì¸ê¸° ì½”ì¸ê³¼ NFTì˜ ìˆœìœ„ì™€ ì‹¤ì‹œê°„ ê°€ê²© í™•ì¸ ê°€ëŠ¥
- ì½”ì¸ì„ ê²€ìƒ‰í•˜ê³  ì¦ê²¨ì°¾ê¸° ì €ì¥ ê°€ëŠ¥
- ì„ íƒí•œ Coinì˜ ê°€ê²©, ë™í–¥ì„ Chartë¡œ í™•ì¸ ê°€ëŠ¥
- ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì‚¬ì§„ ì €ì¥ ê°€ëŠ¥
<br>

## ê¸°ìˆ ìŠ¤íƒ
- UIKit, MVVM-C, Input-Output, Singleton, Repository
- Alamofire, CustomObservable
- DGCharts, Realm
- Kingfisher, SnapKit
<br>

## ê°œë°œ í™˜ê²½
- ê°œë°œ ì¸ì› : 1ì¸ ê°œë°œ
- ê°œë°œ ê¸°ê°„ : 2024.03 ~ 2024.03 (6ì¼)
- ìµœì†Œ ë²„ì „ : iOS 15.0
- iPhone SE3 ~ iPhone 15 Pro Max ì „ ê¸°ì¢… í˜¸í™˜ ê°€ëŠ¥
<br>

## êµ¬í˜„ ê¸°ìˆ 
- MVVMì˜ Input-Output Patternê³¼ CustomObservableClassë¥¼ í™œìš©í•œ ë°ì´í„° ë°”ì¸ë”©
- Coordinator Patternìœ¼ë¡œ ViewControllerì˜ í™”ë©´ ì „í™˜ ì½”ë“œ ë¶„ë¦¬ì™€ ì˜ì¡´ì„± ê´€ë¦¬
- CoinAPIì˜ ë‹¤ì–‘í•œ DTOë¥¼ Entityë¡œ ë³€í™˜í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ê³„ì¸µê³¼ ë·° ê³„ì¸µ ë¶„ë¦¬
- Alamofireì˜ URLRequestConvertibleë¥¼ í™œìš©í•œ RouterPatternìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ ì¶”ìƒí™”
- APIì™€ Realmì„ Repository Patternì„ í™œìš©í•˜ì—¬ êµ¬ì¡°í™”, ë°ì´í„° ê³„ì¸µê³¼ ë·° ê³„ì¸µ ë¶„ë¦¬
- Compositional Layoutì„ í™œìš©í•´ í•œ í™”ë©´ì—ì„œ ë³µì¡í•œ êµ¬ì¡°ì˜ Layout êµ¬í˜„
- DGCharts ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ ì½”ì¸ Chart ê·¸ë˜í”„ í™”ë©´ êµ¬í˜„
- ì ‘ê·¼ì œì–´ìë¥¼ í™œìš©í•œ ì½”ë“œì˜ ì€ë‹‰í™” ë° ì»´íŒŒì¼ ìµœì í™”ë¥¼ í†µí•œ ì„±ëŠ¥ ê°œì„ 
- Network ErrorHandlingê³¼ Alert êµ¬í˜„
- Data, Coordinator, Repository, ViewModel Protocolì„ ì±„íƒí•´ êµ¬ì¡°í™”ëœ ì½”ë“œ êµ¬í˜„
- CustomToastë¥¼ êµ¬í˜„í•´ ì‚¬ìš©ìì—ê²Œ ì§ê´€ì ì´ê³  ë°˜ì‘ì„± ìˆëŠ” í”¼ë“œë°± ì œê³µ
- BaseUI ìƒì†ìœ¼ë¡œ ì¼ê´€ëœ ViewController êµ¬ì¡° í˜•ì„±
<br>

## âœ… íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### ë‹¤ì–‘í•œ Typeì˜ Dataë¥¼ ì•± ë‚´ì—ì„œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ DTOì™€ Entity ì‚¬ìš©
<div markdown="1">
CoinAPIë¥¼ í†µí•´ ê°€ì ¸ì˜¨ Dataë¥¼ ì•± ë‚´ì—ì„œ ê°€ê³µí•´ì„œ ì‚¬ìš©í•´ì„œ ì‚¬ìš©í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.<br>
ViewModelì—ì„œ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ë ¤ë©´ DTOë¥¼ ViewModelì´ ì•Œê³  ìˆê¸° ë•Œë¬¸ì— ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§€ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.<br>
DTOì—ì„œ toEntity ì—°ì‚°í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ì–´ ë°”ë¡œ Entityë¡œ ë³€í™˜í•´ì£¼ê³ ,<br>
CoinDataë¥¼ ê°€ì ¸ì˜¤ëŠ” Repositoryë¥¼ í™œìš©í•´ì„œ ìš”ì²­ì„ í•˜ë©´<br>
ViewModelì—ì„œëŠ” DTOëŠ” ëª¨ë¥¸ì±„ë¡œ Entityë§Œ ê°€ì§€ê³  í™œìš©í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.<br>
ì„œë²„ì—ì„œ ë‚´ë ¤ì£¼ëŠ” Dataê°€ ë°”ë€Œì–´ë„ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰½ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.<br>
<br>

```swift
//TrendingDTO
struct TrendingDTO: DTO {
    let coins: [Coin]
    let nfts: [Nft]
    let categories: [Category]
    
    // MARK: - ToEntity
    
    var toEntity: TrendingEntity {
        let coins = self.coins.map { $0.toEntity }
        let nfts = self.nfts.map { $0.toEntity }
        return TrendingEntity(coins: coins, nfts: nfts)
    }
}

//TrendingRepository
final class TrendingRepository: Repository {
    func fetch(router: APIRouter, completionHandler: @escaping ((Result<TrendingEntity, Error>) -> Void)) {
        APIService.shared.callRequest(router: router,
                                      type: TrendingDTO.self) { data in
            switch data {
            case .success(let success):
                print(success)
                completionHandler(.success(success.toEntity))
            case .failure(let failure):
                print(failure.localizedDescription)
                completionHandler(.failure(failure))
            }
        }
    }
}
```
</div>
<br>

### í•œì •ëœ ë¬´ë£Œ API ì½œìˆ˜ë¡œ ì—°ê²°ì´ ëŠê¸°ëŠ” ë¬¸ì œê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒ
<div markdown="1">
ê¼¼ê¼¼í•œ ìƒí™©ë³„ Errorì²˜ë¦¬ë¥¼ í†µí•´<br>
ì‚¬ìš©ìì—ê²Œ í˜„ì¬ Serverìƒí™©ì„ ì•Œë ¤ì£¼ê³ , ì—°ê²° ì¬ì‹œë„ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„<br>
<br>

```swift
//CCError
enum CCError: Int, CaseIterable, Error {
    case badRequest = 400
    case Unauthorised = 401
    case tooManyRequests = 429
    case serviceUnavailable = 503
    case internalServerError = 500
    case apiKeyMissing = 10002
    case notEndPoint = 0005
    case forbidden = 403
    case accessDenied = 1020
    case unKnown
    
    var description: String {
        switch self {
        case .badRequest:
            "ìœ íš¨í•˜ì§€ ì•Šì€ ìš”ì²­ì…ë‹ˆë‹¤. ì¬ì‹œë„ í•´ì£¼ì„¸ìš”."
        case .Unauthorised:
            "ìŠ¹ì¸ë˜ì§€ ì•Šì€ ê³„ì •ì…ë‹ˆë‹¤. ê³„ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”."
        case .tooManyRequests:
            "ìš”ì²­ì´ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ì¬ì‹œë„ í•´ì£¼ì„¸ìš”."
        case .serviceUnavailable:
            "í˜„ì¬ ì´ìš©í•  ìˆ˜ ì—†ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”."
        //...
        }
    }
}

//TrendingViewModel
private func callRequest(group: DispatchGroup) {
    group.enter()
    trendingRepository.fetch(router: .trending) { [weak self] trending in
        defer { group.leave() }
        guard let self else { return }
        switch trending {
        case .success(let success):
            output.trendingCoinData.onNext(success.coins)
            output.trendingNFTData.onNext(success.nfts)
        case .failure(let failure):
            output.error.onNext(checkError(error: failure))
        }
    }
}

func checkError(error: Error) -> CCError {
    guard let code = error.asAFError?.responseCode,
          let error = CCError(rawValue: code)
    else { return .unKnown }
    return error
}
```
</div>
<br>

### Toastì™€ Alertì„ ë‹¤ì–‘í•œ Tabê³¼ í™”ë©´ì—ì„œ ì‚¬ìš©í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” ê´€ë¦¬ì˜ ì–´ë ¤ì›€ê³¼ ì¤‘ë³µì½”ë“œ ë°œìƒ
<div markdown="1">
Toastë·°ì™€ Alertë·°ëŠ” ë‹¤ì–‘í•œ Tabê³¼ í™”ë©´ì—ì„œ ë‚˜ì˜¤ê²Œ ë˜ëŠ”ë°<br>
ê·¸ë•Œë§ˆë‹¤ ì´ˆê¸°í™”í•˜ë©´ ê´€ë¦¬ê°€ í˜ë“¤ê³ , ì¤‘ë³µëœ ì½”ë“œê°€ ë°œìƒí•˜ê²Œ ë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.<br>
Coordinatorë¥¼ ë„ì…í•˜ê³ , Extensionìœ¼ë¡œ alertê³¼ toast ë·°ë¥¼ ì¶”ê°€í•´<br>
ì–´ë–¤ Coordinatorì—ì„œë„ alertê³¼ toastë·°ë¥¼ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œ ê³³ì—ì„œ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.<br>
<br>

```swift
//Coordinator+
extension Coordinator {
    func showAlert(title: String = "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”",
                   message: String,
                   okButtonTitle: String = "í™•ì¸",
                   primaryButtonTitle: String,
                   okAction: (() -> Void)? = nil,
                   primaryAction: (() -> Void)?) {
        let alert = UIAlertController(title: title,
                                      message: message,
                                      preferredStyle: .alert)
        //...
        navigationController?.present(alert, animated: true)
    }
    
    func showToast(_ type: Toast) {
        let vc = ToastViewController(inputMessage: type.message)
        vc.modalPresentationStyle = .overFullScreen
        vc.modalTransitionStyle = .crossDissolve
        navigationController?.present(vc, animated: true)
        
        DispatchQueue.main.asyncAfter(deadline: .now() + 0.8) {
            vc.dismiss(animated: true)
        }
    }
}

//CoinSearchViewModel
func showToast(_ type: Toast) {
  coordinator?.showToast(type)
}

//FavoriteViewModel
func showAlert(error: CCError) {
    coordinator?.showAlert(message: error.description,
                           okButtonTitle: CCConst.Ments.dismiss.text,
                           primaryButtonTitle: CCConst.Ments.retry.text) { [weak self] in
        guard let self else { return }
        input.viewWillAppear.onNext(())
    }
}
```
</div>
<br>
